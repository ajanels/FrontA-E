<app-sidebar></app-sidebar>
<div class="content">
    <div class="usuarios-container">
        <h2>Usuarios</h2>

        <!-- Barra de b√∫squeda y filtro -->
        <div class="search-container">
            <input type="text" placeholder="Buscar usuario..." [(ngModel)]="searchTerm" (input)="filtrarUsuarios()">
            
            

            <!-- Bot√≥n de agregar usuario -->
            <button (click)="abrirModal()">+</button>
        </div>

        <!-- Tabla de usuarios -->
        <table>
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Email</th>
                    <th>Rol</th>
                    <th>Tel√©fono</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let usuario of usuariosFiltrados">
                    <td>{{ usuario.usuPNombre }}</td>
                    <td>{{ usuario.usuPApellido }}</td>
                    <td>{{ usuario.usuEmail }}</td>
                    <td>{{ usuario.usuPuesto }}</td>
                    <td>{{ usuario.usuTelMovil }}</td>
                    <td>{{ usuario.usuEstado }}</td>
                    <td>
                        <button class="edit-button" (click)="editUsuario(usuario)">‚úèÔ∏è</button>
                        <button class="delete-button" (click)="deleteUsuario(usuario.usuId)">üóëÔ∏è</button>
                    </td>
                </tr>
            </tbody>
        </table>
        <!-- Modal -->
        <div class="modal" [class.show]="modalAbierto">
            <div class="modal-content">
              <h2>{{ editando ? 'Editar Usuario' : 'Crear Usuario' }}</h2>
              <form (ngSubmit)="guardarUsuario()">
          
                <label for="usuId">ID de Usuario:</label>
                <input type="text" id="usuId" [(ngModel)]="usuario.usuId" name="usuId" placeholder="Ingrese ID de usuario" required>

                <label for="nombre">Nombre:</label>
                <input type="text" id="nombre" [(ngModel)]="usuario.usuPNombre" name="usuPNombre" placeholder="Ingrese nombre" required>
          
                <label for="apellido">Apellido:</label>
                <input type="text" id="apellido" [(ngModel)]="usuario.usuPApellido" name="usuPApellido" placeholder="Ingrese apellido" required>
          
                <label for="cui">CUI:</label>
                <input type="text" id="cui" [(ngModel)]="usuario.usuCui" name="usuCui" placeholder="Ingrese CUI" required>
          
                <label for="nit">NIT:</label>
                <input type="text" id="nit" [(ngModel)]="usuario.usuNit" name="usuNit" placeholder="Ingrese NIT" required>
          
                <label for="fechaNacimiento">Fecha de Nacimiento:</label>
                <input type="date" id="fechaNacimiento" [(ngModel)]="usuario.usuFecNacimiento" name="usuFecNacimiento" required>
                
                <label for="fechaIngreso">Fecha de Ingreso:</label>
                <input type="date" id="fechaIngreso" [(ngModel)]="usuario.usuFecIngreso" name="usuFecIngreso" required>
                

                <label for="direccion">Direcci√≥n:</label>
                <input type="text" id="direccion" [(ngModel)]="usuario.usuDireccion" name="usuDireccion" placeholder="Ingrese direcci√≥n" required>
          
                <label for="telefono">Tel√©fono M√≥vil:</label>
                <input type="text" id="telefono" [(ngModel)]="usuario.usuTelMovil" name="usuTelMovil" placeholder="Ingrese tel√©fono" required>
          
                <label for="genero">G√©nero:</label>
                <select id="genero" [(ngModel)]="usuario.usuGenero" name="usuGenero" required>
                    <option value="Masculino">Masculino</option>
                    <option value="Femenino">Femenino</option>
                  </select>
                  
          
                <label for="estado">Estado:</label>
                <select id="estado" [(ngModel)]="usuario.usuEstado" name="usuEstado" required>
                  <option value="Activo">Activo</option>
                  <option value="Inactivo">Inactivo</option>
                </select>
          
                <label for="puesto">Puesto:</label>
                <input type="text" id="puesto" [(ngModel)]="usuario.usuPuesto" name="usuPuesto" placeholder="Ingrese puesto" required>
          
                <label for="rol">Rol:</label>
                <select id="rol" [(ngModel)]="usuario.rolId" name="rolId" required>
                    <option *ngFor="let rol of roles" [value]="rol.rolId">{{ rol.rolNombre }}</option>
                  </select>
          
                <label for="contrase√±a">Contrase√±a:</label>
                <input type="password" id="contrase√±a" [(ngModel)]="usuario.usuContrasena" name="usuContrase√±a" placeholder="Ingrese contrase√±a" required>
          
                <label for="email">Email:</label>
                <input type="email" id="email" [(ngModel)]="usuario.usuEmail" name="usuEmail" placeholder="Ingrese correo electr√≥nico" required>
          
                <div class="modal-buttons">
                    <button type="button" (click)="crearUsuario()">Guardar</button>
                    <button type="button" (click)="cerrarModal()">Cancelar</button>
                </div>
              </form>
            </div>
          </div>
          
          
    </div>
</div>
